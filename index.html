<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calendrier</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
    />
    <link rel="icon" type="image/x-icon" href="icon.png" />
  </head>
  <body>
    <div id="settings-wrapper" class="page">
      <form name="parameter-form">
        <input type="submit" value="Suivant" />
        <h1>Paramètres</h1>
        <div>
          <table class="parameter">
            <thead>
              <tr>
                <th>Date de début</th>
                <th>Nombre de jours</th>
                <th>Jours fériés</th>
                <th>Durée d'une leçon</th>
                <th>Profs et niveaux</th>
                <th>Contraintes</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <input
                    type="date"
                    id="startDate"
                    name="startDate"
                    placeholder="Date de début"
                  />
                </td>
                <td>
                  <input
                    type="number"
                    name="numberDays"
                    min="1"
                    style="width: 50px"
                    required
                  />
                </td>
                <td>
                  <input
                    type="date"
                    id="bankHolidays"
                    name="bankHolidays"
                    placeholder="Jours fériés"
                  />
                </td>
                <td>
                  <select name="lessonDuration" required>
                    <option value="1">1h</option>
                    <option value="1.5">1h30</option>
                    <option value="2">2h</option>
                    <option value="2.5">2h30</option>
                    <option value="3">3h</option>
                    <option value="3.5">3h30</option>
                    <option value="4">4h</option>
                  </select>
                </td>
                <td>
                  <label for="file-input" class="custom-file-input"
                    >Importer csv</label
                  >
                  <input type="file" id="file-input" />
                </td>
                <td>
                  <label for="file-input-constraints" class="custom-file-input"
                    >Importer csv</label
                  >
                  <input type="file" id="file-input-constraints" />
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </form>
      <div class="flex">
        <div id="data-loaded"></div>
        <div id="erase-data" style="display: none">
          <button onclick="erase()">Effacer</button>
        </div>
      </div>
      <div class="flex">
        <div id="constraints-loaded"></div>
        <div id="erase-constraints" style="display: none">
          <button onclick="eraseConstraints()">Effacer</button>
        </div>
      </div>
    </div>
    <div id="conditions-wrapper" class="page" style="display: none">
      <button onclick="navigate('settings-wrapper')">Précédent</button>
      <button onclick="confirmGenerateCalendar()">Générer un calendrier</button>
      <div class="date-indication"></div>
      <div class="teachers-wrapper two-col-layout">
        <h1>Professeurs</h1>
        <button
          id="teachers-conditions-download"
          onclick="downloadConditions()"
        >
          Télécharger
        </button>
        <table class="teachers">
          <thead>
            <tr>
              <th>Nom</th>
              <th>Indispo. récurrente</th>
              <th>Congés</th>
              <th>Volume horaire (h)</th>
              <th>Niveaux préférés</th>
            </tr>
          </thead>
          <tbody id="tbody-teachers"></tbody>
        </table>
      </div>
      <div class="levels-wrapper two-col-layout">
        <h1>Niveaux</h1>
        <table class="levels">
          <thead>
            <tr>
              <th>
                <input
                  id="levels-checkbox"
                  type="checkbox"
                  onchange="selectOrUnselectAll(this.checked)"
                />
              </th>
              <th>Nom</th>
            </tr>
          </thead>
          <tbody id="tbody-levels"></tbody>
        </table>
      </div>
    </div>
    <div id="lessons-calendar-wrapper" class="page" style="display: none">
      <div id="confirmation">
        <span>Demande de confirmation:</span>
        <input id="ask-confirmation" type="checkbox" />
      </div>
      <button onclick="goBackTo('conditions-wrapper')">Précédent</button>
      <button onclick="reGenerateCalendar()">Générer un calendrier</button>
      <div class="date-indication"></div>
      <div id="calendar-wrapper"></div>
      <div id="lessons-wrapper">
        <form name="addLesson-form">
          <h2>Ajouter/Supprimer des leçons</h2>
          <table class="lessons">
            <thead>
              <tr>
                <th>Date</th>
                <th>Professeur</th>
                <th>Niveau</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody id="lessons">
              <tr>
                <td>
                  <input id="date" type="date" name="date" required />
                </td>
                <td>
                  <select id="teachers" name="teacherName" required>
                    <option value=""></option>
                  </select>
                </td>
                <td>
                  <select id="levels" name="levelName" required>
                    <option value=""></option>
                  </select>
                </td>
                <td><input type="submit" value="+" title="Ajouter" /></td>
              </tr>
            </tbody>
          </table>
        </form>
      </div>
      <div class="result">
        <h1>Vérifications</h1>
        <div class="teachers-wrapper two-col-layout">
          <h2>Professeurs</h2>
          <div id="teachers-result-confirmation"></div>
        </div>
        <div class="levels-wrapper two-col-layout">
          <h2>Niveaux</h2>
          <div id="levels-result-confirmation"></div>
        </div>
      </div>
    </div>
    <!-- Load util files -->
    <script src="utils/common-util.js"></script>
    <script src="utils/html-conditions-builder-util.js"></script>
    <script src="utils/html-result-confirmations-builder-util.js"></script>
    <script src="utils/html-calendar-builder-util.js"></script>
    <script src="utils/create-lessons-logic.js"></script>
    <script src="utils/date-util.js"></script>
    <!-- Load models -->
    <script src="models/lesson.js"></script>
    <script src="models/teacher.js"></script>
    <script src="models/level.js"></script>
    <!-- Load colors -->
    <script src="teachers-colors.js"></script>
    <!-- Flatpickr JS -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <!-- Load script -->
    <script src="script.js"></script>
  </body>
</html>
